(window["webpackJsonp_kstar-ui"]=window["webpackJsonp_kstar-ui"]||[]).push([["chunk-2d0e23a3"],{"7e98":function(e,t,a){"use strict";a.r(t);var c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("k-checkbox-tree",e._g(e._b({ref:"k-checkbox-two-tree",staticClass:"reset-kui-select-tree",attrs:{data:e.treeData,props:e.defaultProps,"expand-on-click-node":!1,"tooltip-config":{disabled:!1},"tree-height":"400px",placeholder:"请选择","left-text":"按产品","additional-tree":!0,"default-radio":e.currentDefaultRadio,"init-checked-items":e.checkedKeysObj,"right-text":"按板块",clearable:"",align:"left",single:e.resetSingle},on:{"tree-filter":e.treeFilter,"check-change":e.checkChange,"radio-change":e.radioChange,change:e.change},scopedSlots:e._u(["按产品"===e.currentDefaultRadio?{key:"customNode",fn:function(t){var c=t.data;return[a("span",{directives:[{name:"show",rawName:"v-show",value:"全部"!==c.vcPlateTypeName,expression:"data.vcPlateTypeName!=='全部'"}]},[e._v(e._s(c.vcPlateCode)+"   ")]),a("span",[e._v(e._s(c.vcPlateTypeName))])]}}:null],null,!0),model:{value:e.checkedKeys,callback:function(t){e.checkedKeys=t},expression:"checkedKeys"}},"k-checkbox-tree",e.$attrs,!1),e.$listeners))},n=[],i=a("2909"),d=(a("a9e3"),a("99af"),a("e9c4"),a("d81d"),a("d3b7"),a("159b"),a("b26e")),r=a("f4c2b"),l=a("2ef0"),o=a.n(l),s={props:{specialSingle:{type:Boolean,default:!1},single:{type:Boolean,default:!1},closeTipRandom:{type:[String,Number,Boolean],default:""},checkedKeys:{type:Array,default:function(){return[]}},checkedKeysObj:{type:Array,default:function(){return[]}},defaultRadio:{type:String,default:"按产品"}},data:function(){return{vcIndexsetId:"",defaultProps:{label:"vcPlateTypeName",value:"vcPlateCode"},productTreeData:null,plateTreeData:null,currentDefaultRadio:"",checkNodes:[],allCheckData:[]}},computed:{treeData:function(){return"按板块"===this.currentDefaultRadio?this.plateTreeData:this.productTreeData},resetSingle:function(){return this.specialSingle?"按板块"===this.currentDefaultRadio:this.single}},watch:{checkNodes:function(e){var t=this;this.$nextTick((function(){t.allCheckData=[].concat(Object(i["a"])(t.checkedKeysObj),Object(i["a"])(e));var a=o.a.uniqBy(t.allCheckData,"vcPlateCode");t.$emit("update:checkedKeysObj",a)}))},closeTipRandom:function(){this.$refs["k-checkbox-two-tree"].popoverVisible=!1},defaultRadio:{immediate:!0,handler:function(e){this.currentDefaultRadio=e}}},created:function(){this.getProduct(),this.getPlate()},methods:{change:function(e,t){var a=JSON.parse(JSON.stringify(t.checkNodes));a.map((function(e){delete e.checked})),this.checkNodes=a,this.$emit("get-checked-nodes",a)},getPlate:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(r["a"])({byPlate:"BY_PLATE",keyword:t}).then((function(t){e.$nextTick((function(){e.plateTreeData=t.data,(e.single||e.specialSingle)&&e.disableTypeIdex(e.plateTreeData)}))}))},disableTypeIdex:function(e){var t=this;e.forEach((function(e){"1"===e.type&&(e.disabled=!0),e.children&&e.children.length&&t.disableTypeIdex(e.children)}))},getProduct:function(){var e=this;Object(d["c"])("PRODUCT_LIST_SEARCH_INDEXSET").then((function(t){var a;e.vcIndexsetId=null===(a=t.data[0])||void 0===a?void 0:a.value,e.getExcProdIndexSetTrial()}))},getExcProdIndexSetTrial:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a={vcIndexsetId:this.vcIndexsetId,pageNo:1,pageSize:100,indexsetParamInfoList:[{vcIndexsetParamCode:"keyWord",vcIndexsetParamType:"String",vcIndexsetParamDefault:t},{vcIndexsetParamCode:"count",vcIndexsetParamDefault:"1000",vcIndexsetParamType:"Int"}]};Object(d["e"])(a).then((function(t){e.$nextTick((function(){t.data.prodResult.length&&(t.data.prodResult[0].vcPlateTypeName=t.data.prodResult[0].subItemName,t.data.prodResult[0].vcPlateCode=t.data.prodResult[0].subItemCode,t.data.prodResult[0].children.length&&t.data.prodResult[0].children.forEach((function(e){e.vcPlateTypeName=e.subItemName,e.vcPlateCode=e.subItemCode}))),e.productTreeData=t.data.prodResult}))}))},treeFilter:function(e){"按产品"===this.currentDefaultRadio?this.getExcProdIndexSetTrial(e):this.getPlate(e)},checkChange:function(e){(this.specialSingle&&"按板块"===this.currentDefaultRadio||this.single)&&(e=[e[0]]),this.$emit("update:checkedKeys",e),this.$emit("get-checked-box",e),this.$emit("getAllData",this.treeData)},radioChange:function(e){"按产品"===e?this.getProduct():this.getPlate(),this.currentDefaultRadio=e,this.$emit("update:checkedKeysObj",[]),this.$emit("update:checkedKeys",[]),this.$emit("get-checked-box",[]),this.$emit("get-current-radio",this.currentDefaultRadio)}}},u=s,h=a("2877"),p=Object(h["a"])(u,c,n,!1,null,"5cb21d9e",null);t["default"]=p.exports}}]);