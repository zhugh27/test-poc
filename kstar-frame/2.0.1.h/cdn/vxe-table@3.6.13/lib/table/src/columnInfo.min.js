"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColumnInfo=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_conf=_interopRequireDefault(require("../../v-x-e-table/src/conf")),_formats=require("../../v-x-e-table/src/formats"),_util=require("./util"),_utils=require("../../tools/utils"),_log=require("../../tools/log");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var ColumnInfo=function(){function u(e,r){var t,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},l=o.renderHeader,i=o.renderCell,n=o.renderFooter,o=o.renderData,d=(_classCallCheck(this,u),e.$xegrid),s=d?d.proxyOpts:null,a=r.formatter,f=!_xeUtils.default.isBoolean(r.visible)||r.visible;"development"===process.env.NODE_ENV&&(t=["seq","checkbox","radio","expand","html"],r.type&&-1===t.indexOf(r.type)&&(0,_log.warnLog)("vxe.error.errProp",["type=".concat(r.type),t.join(", ")]),(_xeUtils.default.isBoolean(r.cellRender)||r.cellRender&&!_xeUtils.default.isObject(r.cellRender))&&(0,_log.warnLog)("vxe.error.errProp",["column.cell-render=".concat(r.cellRender),"column.cell-render={}"]),(_xeUtils.default.isBoolean(r.editRender)||r.editRender&&!_xeUtils.default.isObject(r.editRender))&&(0,_log.warnLog)("vxe.error.errProp",["column.edit-render=".concat(r.editRender),"column.edit-render={}"]),r.cellRender&&r.editRender&&(0,_log.warnLog)("vxe.error.errConflicts",["column.cell-render","column.edit-render"]),"expand"===r.type&&e.treeConfig&&e.treeOpts.line&&(0,_log.errLog)("vxe.error.errConflicts",["tree-config.line","column.type=expand"]),r.remoteSort&&(0,_log.warnLog)("vxe.error.delProp",["column.remote-sort","sort-config.remote"]),r.sortMethod&&(0,_log.warnLog)("vxe.error.delProp",["column.sort-method","sort-config.sortMethod"]),a)&&(_xeUtils.default.isString(a)?(t=_formats.formats.get(a)||_xeUtils.default[a],_xeUtils.default.isFunction(t)||(0,_log.errLog)("vxe.error.notFunc",[a])):_xeUtils.default.isArray(a)&&(e=_formats.formats.get(a[0])||_xeUtils.default[a[0]],_xeUtils.default.isFunction(e)||(0,_log.errLog)("vxe.error.notFunc",[a[0]]))),Object.assign(this,{type:r.type,property:r.field,field:r.field,title:r.title,width:r.width,minWidth:r.minWidth,maxWidth:r.maxWidth,resizable:r.resizable,fixed:r.fixed,align:r.align,headerAlign:r.headerAlign,footerAlign:r.footerAlign,showOverflow:r.showOverflow,showHeaderOverflow:r.showHeaderOverflow,showFooterOverflow:r.showFooterOverflow,className:r.className,headerClassName:r.headerClassName,footerClassName:r.footerClassName,formatter:a,sortable:r.sortable,sortBy:r.sortBy,sortType:r.sortType,sortMethod:r.sortMethod,remoteSort:r.remoteSort,filters:(0,_util.toFilters)(r.filters),filterMultiple:!_xeUtils.default.isBoolean(r.filterMultiple)||r.filterMultiple,filterMethod:r.filterMethod,filterResetMethod:r.filterResetMethod,filterRecoverMethod:r.filterRecoverMethod,filterRender:r.filterRender,treeNode:r.treeNode,cellType:r.cellType,cellRender:r.cellRender,editRender:r.editRender,contentRender:r.contentRender,exportMethod:r.exportMethod,footerExportMethod:r.footerExportMethod,titleHelp:r.titleHelp,titlePrefix:r.titlePrefix,params:r.params,id:r.colId||_xeUtils.default.uniqueId("col_"),parentId:null,visible:f,halfVisible:!1,defaultVisible:f,checked:!1,halfChecked:!1,disabled:!1,level:1,rowSpan:1,colSpan:1,order:null,sortTime:0,renderWidth:0,renderHeight:0,resizeWidth:0,renderLeft:0,renderArgs:[],model:{},renderHeader:l||r.renderHeader,renderCell:i||r.renderCell,renderFooter:n||r.renderFooter,renderData:o,slots:r.slots}),s&&s.beforeColumn&&s.beforeColumn({$grid:d,column:this})}return _createClass(u,[{key:"getTitle",value:function(){return(0,_utils.getFuncText)(this.title||("seq"===this.type?_conf.default.i18n("vxe.table.seqTitle"):""))}},{key:"getKey",value:function(){return this.field||(this.type?"type=".concat(this.type):null)}},{key:"update",value:function(e,r){"filters"!==e&&("field"===e&&(this.property=r),this[e]=r)}}]),u}();exports.ColumnInfo=ColumnInfo;